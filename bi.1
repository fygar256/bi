.TH BI 1 "April 14, 2025" "Version 2.8.0" "User Commands"
.SH NAME
bi \- vi-like binary editor
.SH SYNOPSIS
.B bi
[\fB-v\fR] [\fB-s \fIscript.bi\fR] \fItargetfile\fR
.SH DESCRIPTION
.B bi
is a binary editor designed to mimic the interface of the UNIX editor
.IR vi .
The name "bi" stands for "Binary editor like vI", catering to vi and binary editing enthusiasts.

.SH MODES
.TP
.B Edit Mode
Hex editing and navigation using vi-like keys.
.TP
.B Command-Line Mode
For scripting and detailed editing operations. Entered via \fB:\fR or \fB/\fR.

.SH EDIT MODE COMMANDS
.TP
\fI<hex-key>\fR
Set data byte at cursor.
.TP
\fBh j k l\fR or arrow keys
Move cursor left, down, up, right.
.TP
\fB^F\fR, \fB^B\fR
Page forward/backward (256 bytes).
.TP
\fB^D\fR, \fB^U\fR
Half-page forward/backward (128 bytes).
.TP
\fB^L\fR
Repaint screen.
.TP
\fB^\fR, \fB$\fR
Jump to beginning/end of line.
.TP
\fBm[a-z]\fR
Mark current position.
.TP
\fB'[a-z]\fR
Jump to marked position.
.TP
\fBn\fR, \fBN\fR
Search next/previous result.
.TP
\fBM\fR
Display current marks.
.TP
\fBp\fR, \fBP\fR
Paste yank buffer (overwrite / insert).
.TP
\fBx\fR
Delete byte at cursor.
.TP
\fBZ\fR
Write changes and quit.
.TP
\fBq\fR
Quit without saving.
.TP
\fB/\fR, \fB:\fR
Enter search mode or command-line mode.

.SH COMMAND-LINE MODE
.TP
\fB;\fR
Comment.
.TP
\fB/<regexp>\fR
Search string using regular expression.
.TP
\fB//xx xx xx ...\fR
Search for binary data.
.TP
\fB!<string>\fR
Invoke shell.
.TP
\fBq\fR, \fBq!\fR
Quit / Force quit.
.TP
\fBwq\fR, \fBwq!\fR
Write and quit.
.TP
\fBw <filename>\fR
Write to specified file.
.TP
\fBt <filename>\fR
Run script in silent mode.
.TP
\fBT <filename>\fR
Run script in verbose mode.
.TP
\fB[offset]\fR
Jump to address.
.TP
\fB[offset]m[a-z]\fR
Mark address.
.TP
\fB[offset]S<string>\fR
Insert string at offset.
.TP
\fB[offset]s<string>\fR
Overwrite string at offset.
.TP
\fB[offset]R<file>\fR
Read file and insert at offset.
.TP
\fB[offset]r<file>\fR
Overwrite with file content at offset.
.TP
\fB[offset]p\fR, \fB[offset]P\fR
Paste yank buffer (overwrite / insert).
.TP
\fB[offset]f<len>,<data>\fR
Fill specified length with data.
.TP
\fB[start,end]f<xx>\fR
Fill range with byte.
.TP
\fB[offset]i<len>,<data>\fR
Insert data of length.
.TP
\fB[offset]d<len>\fR
Delete bytes from offset.
.TP
\fBy/str\fR, \fBy//xx xx xx\fR
Yank string or binary data.
.TP
\fB[start,end]d\fR
Delete data in range.
.TP
\fB[start,end]y\fR
Yank data in range.
.TP
\fB[start,end]|<data>\fR
Bitwise OR.
.TP
\fB[start,end]&<data>\fR
Bitwise AND.
.TP
\fB[start,end]^<data>\fR
Bitwise XOR.
.TP
\fB[start,end]~\fR
Bitwise NOT.
.TP
\fB[start,end]v<dest>\fR
Move data to destination.
.TP
\fB[start,end]c<dest>\fR
Copy data to destination.
.TP
\fB[start,end]i<dest>\fR
Insert data to destination.
.TP
\fB[start,end]a/regexp/str\fR
Replace regexp with string.
.TP
\fB[start,end]a/regexp//xx xx\fR
Replace regexp with binary.
.TP
\fB[start,end]a//xx xx/str\fR
Replace binary with string.
.TP
\fB[start,end]a//xx//yy\fR
Replace binary with binary.
.TP
\fB[start,end]<<[times],[0,1]\fR
Left shift / rotate multibyte (not implemented).
.TP
\fB[start,end]>>[times],[0,1]\fR
Right shift / rotate multibyte (not implemented).
.TP
\fB<start>,<end>w<file>\fR
Write range to file.

.SH EXPRESSIONS
Values can be provided using expressions:
.TP
Hexadecimal or \fB#\fR-prefixed decimal.
.TP
\fB[a-z]\fR
Mark position.
.TP
\fB0\fR
Start of file.
.TP
\fB.\fR
Current position.
.TP
\fB$\fR
End of file.

.SH SCRIPTING
Scripts may be passed via the \fB-s\fR option:
.TP
\fBbi -s script.bi targetfile\fR
Execute script on target.
.TP
\fBt <filename>\fR
Silent execution.
.TP
\fBT <filename>\fR
Verbose execution.

.SH BUGS
Undo is not supported.
Commands marked with \fB@\fR (bitwise shifts/rotates) are not implemented.

.SH HISTORY
.TP
1991-12-04
Sector lost on floppy disk backup. Inspired the project.
.TP
1992-01-23
Renamed to \fBbi\fR.
.TP
1992-02-10
Version 0.99998.
.TP
2025-04-14
Version 2.8.0. Scripting and expression support.

.SH AUTHOR
T. Maekawa (fygar256)

.SH DISCLAIMER
Use at your own risk. No warranty is provided. The author takes no responsibility for damage caused by use of this software.

